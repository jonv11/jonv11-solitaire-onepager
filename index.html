<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no, maximum-scale=1"
    />
    <meta name="color-scheme" content="light dark" />
    <title>jonv11 Solitaire</title>
    <link rel="preload" href="css/style.css" as="style" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <header class="top-bar" aria-label="Game status">
      <div class="top-bar__block">
        <output id="score" for="game" aria-live="polite">Score: 0</output>
      </div>
      <div class="top-bar__block">
        <output id="moves" for="game" aria-live="polite">Moves: 0</output>
      </div>
      <div class="top-bar__block">
        <output id="time" for="game" aria-live="polite">Time: 00:00</output>
      </div>
      <div id="live" class="sr-only" aria-live="polite"></div>
    </header>

    <main id="game" class="game" role="main" aria-label="Klondike board">
      <!-- Top row: stock, waste, foundations -->
      <section class="stock-row" aria-label="Stock and Waste and Foundations">
        <div
          id="stock"
          class="pile stock"
          role="list"
          aria-label="Stock"
          data-pile="stock"
          tabindex="0"
        ></div>
        <div
          id="waste"
          class="pile waste"
          role="list"
          aria-label="Waste"
          data-pile="waste"
          tabindex="0"
        ></div>
        <div class="spacer" aria-hidden="true"></div>

        <div class="foundations" aria-label="Foundations">
          <div
            id="foundation-S"
            class="pile foundation"
            role="list"
            aria-label="Spades foundation"
            data-pile="foundation"
            data-suit="S"
            tabindex="0"
          ></div>
          <div
            id="foundation-H"
            class="pile foundation"
            role="list"
            aria-label="Hearts foundation"
            data-pile="foundation"
            data-suit="H"
            tabindex="0"
          ></div>
          <div
            id="foundation-D"
            class="pile foundation"
            role="list"
            aria-label="Diamonds foundation"
            data-pile="foundation"
            data-suit="D"
            tabindex="0"
          ></div>
          <div
            id="foundation-C"
            class="pile foundation"
            role="list"
            aria-label="Clubs foundation"
            data-pile="foundation"
            data-suit="C"
            tabindex="0"
          ></div>
        </div>
      </section>

      <!-- Bottom row: tableau 7 columns -->
      <section class="tableau" aria-label="Tableau">
        <div
          id="tab-1"
          class="pile tableau"
          role="list"
          aria-label="Tableau 1"
          data-pile="tableau"
          data-col="1"
          tabindex="0"
        ></div>
        <div
          id="tab-2"
          class="pile tableau"
          role="list"
          aria-label="Tableau 2"
          data-pile="tableau"
          data-col="2"
          tabindex="0"
        ></div>
        <div
          id="tab-3"
          class="pile tableau"
          role="list"
          aria-label="Tableau 3"
          data-pile="tableau"
          data-col="3"
          tabindex="0"
        ></div>
        <div
          id="tab-4"
          class="pile tableau"
          role="list"
          aria-label="Tableau 4"
          data-pile="tableau"
          data-col="4"
          tabindex="0"
        ></div>
        <div
          id="tab-5"
          class="pile tableau"
          role="list"
          aria-label="Tableau 5"
          data-pile="tableau"
          data-col="5"
          tabindex="0"
        ></div>
        <div
          id="tab-6"
          class="pile tableau"
          role="list"
          aria-label="Tableau 6"
          data-pile="tableau"
          data-col="6"
          tabindex="0"
        ></div>
        <div
          id="tab-7"
          class="pile tableau"
          role="list"
          aria-label="Tableau 7"
          data-pile="tableau"
          data-col="7"
          tabindex="0"
        ></div>
      </section>
    </main>
    <nav class="toolbar action-bar" aria-label="Game actions">
      <button id="btnOptions" class="action-btn" aria-haspopup="dialog" aria-label="Show options">
        <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
        <span class="label">Options</span>
      </button>
      <button id="newGame" class="action-btn" aria-label="Start a new game">
        <span class="icon" aria-hidden="true">üîÑ</span>
        <span class="label">New</span>
      </button>
      <button id="auto" class="action-btn" aria-label="Auto-complete when safe">
        <span class="icon" aria-hidden="true">ü§ñ</span>
        <span class="label">Auto</span>
      </button>
      <button id="hint" class="action-btn" aria-label="Show a hint">
        <span class="icon" aria-hidden="true">üí°</span>
        <span class="label">Hint</span>
      </button>
      <button id="undo" class="action-btn" aria-label="Undo last move">
        <span class="icon" aria-hidden="true">‚Ü©Ô∏è</span>
        <span class="label">Undo</span>
      </button>
    </nav>

    <div id="optionsPopup" class="popup-overlay" hidden>
      <div class="popup" role="dialog" aria-modal="true" aria-labelledby="optionsTitle">
        <div class="popup-header">
          <h2 id="optionsTitle">Options</h2>
          <button class="popup-close" aria-label="Close options">&times;</button>
        </div>
        <div class="popup-content">
          <div class="row select-row">
            <label for="drawCount">Draw</label>
            <select id="drawCount" aria-label="Draw count">
              <option value="1">1</option>
              <option value="3" selected>3</option>
            </select>
          </div>
          <div class="row select-row">
            <label for="redealPolicy">Redeal</label>
            <select id="redealPolicy" aria-label="Redeal policy">
              <option value="unlimited" selected>Unlimited</option>
              <option value="limited(1)">1</option>
              <option value="limited(3)">3</option>
              <option value="none">None</option>
            </select>
          </div>
          <div class="row toggle-row">
            <label for="leftHandMode">Left-hand</label>
            <input type="checkbox" id="leftHandMode" class="toggle-input" />
          </div>
          <div class="row toggle-row">
            <label for="hints">Hints</label>
            <input type="checkbox" id="hints" class="toggle-input" checked />
          </div>
          <div class="row toggle-row">
            <label for="autoComplete">Auto</label>
            <input type="checkbox" id="autoComplete" class="toggle-input" checked />
          </div>
          <div class="row toggle-row">
            <label for="animations">Anim</label>
            <input type="checkbox" id="animations" class="toggle-input" checked />
          </div>
          <div class="row toggle-row">
            <label for="sound">Sound</label>
            <input type="checkbox" id="sound" class="toggle-input" />
          </div>
          <div class="row slider-row">
            <label for="animSpeed">Speed</label>
            <input type="range" id="animSpeed" min="0" max="100" value="50" />
          </div>
        </div>
      </div>
    </div>

    <noscript>
      <p>This app requires JavaScript enabled.</p>
    </noscript>

    <!-- JS entrypoints -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="js/store.js"></script>
    <script src="js/popup.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/stats-ui.js"></script>
    <script src="js/options-ui.js"></script>
    <script src="js/model.js"></script>
    <script src="js/emitter.js"></script>
    <script src="js/engine.js"></script>
    <!-- Deterministic solver for dead-end detection -->
    <script src="js/solver.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
